import{h as M,_ as S,c as n,f as d,b as o,w as r,F as f,r as s,o as p,j as b,a as j,p as k,d as N,e as C}from"./index-CyY7Qiv8.js";import{r as v}from"./arrayTool-CjGzjlEy.js";import{c as w}from"./paginationTool-D_tISRW2.js";async function P(){try{return(await M(()=>import("./undergraduate-Cb_2N1mk.js"),[])).default}catch{return[]}}function I(a){let e=a.map(c=>c.classification);e=v(e);const _=e.map(c=>{const i=a.filter(m=>m.classification===c).map(m=>m.category);return{classification:c,categoryList:v(i)}});return{classificationList:e,allCategoryList:_}}const A={name:"majorView",computed:{constant(){return n},categoryList(){const a=this.allCategoryList.find(e=>e.classification===this.classification);return(a==null?void 0:a.categoryList)??[]},filterMajorList(){let a=this.majorList;return a=a.filter(e=>e.classification.indexOf(this.majorName)!==-1||e.category.indexOf(this.majorName)!==-1||e.name.indexOf(this.majorName)!==-1),this.classification!==n.common.all&&(a=a.filter(e=>e.classification===this.classification)),this.category!==n.common.all&&(a=a.filter(e=>e.category===this.category)),a},displayMajorList(){return w(this.filterMajorList,this.pageData)}},data(){return{majorName:"",classificationList:[],classification:n.common.all,allCategoryList:[],category:n.common.all,majorList:[],pageData:{currentPage:1,pageSize:10,pageSizes:[10,20,50,100],pagerCount:5}}},methods:{goBack(){this.$router.push(`/${n.tabBar.DATA}/${n.dataNavBar.LIBRARY}/search`)},classificationChange(){this.category=n.common.all}},async mounted(){this.majorList=await P();const a=I(this.majorList);this.classificationList=a.classificationList,this.allCategoryList=a.allCategoryList}},V=a=>(k("data-v-e0d15bbe"),a=a(),N(),a),O=V(()=>C("span",null,"本科专业库",-1)),E=V(()=>C("span",null,"没有相关专业",-1));function R(a,e,_,c,l,i){const m=s("el-page-header"),L=s("el-divider"),z=s("el-input"),u=s("el-option"),h=s("el-select"),y=s("el-form-item"),B=s("el-form"),g=s("el-table-column"),D=s("el-table"),x=s("el-pagination");return p(),d(f,null,[o(m,{onBack:i.goBack},{content:r(()=>[O]),_:1},8,["onBack"]),o(L,{class:"head-divider"}),o(z,{modelValue:l.majorName,"onUpdate:modelValue":e[0]||(e[0]=t=>l.majorName=t),modelModifiers:{trim:!0},placeholder:"门类/专业类/专业名称","prefix-icon":"Search",clearable:""},null,8,["modelValue"]),o(B,{class:"filter-form"},{default:r(()=>[o(y,{label:"门类："},{default:r(()=>[o(h,{modelValue:l.classification,"onUpdate:modelValue":e[1]||(e[1]=t=>l.classification=t),onChange:i.classificationChange},{default:r(()=>[o(u,{label:i.constant.common.all,value:i.constant.common.all},null,8,["label","value"]),(p(!0),d(f,null,b(l.classificationList,t=>(p(),j(u,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),o(y,{label:"专业类："},{default:r(()=>[o(h,{modelValue:l.category,"onUpdate:modelValue":e[2]||(e[2]=t=>l.category=t),disabled:i.categoryList.length===0},{default:r(()=>[o(u,{label:i.constant.common.all,value:i.constant.common.all},null,8,["label","value"]),(p(!0),d(f,null,b(i.categoryList,t=>(p(),j(u,{key:t,lang:t,value:t},null,8,["lang","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),o(L,{class:"table-head-divider"}),o(D,{data:i.displayMajorList,stripe:""},{empty:r(()=>[E]),default:r(()=>[o(g,{prop:"classification",label:"门类",width:"70px"}),o(g,{prop:"category",label:"专业类"}),o(g,{prop:"name",label:"专业名称"})]),_:1},8,["data"]),o(x,{class:"pagination",onCurrentChange:e[3]||(e[3]=t=>l.pageData.currentPage=t),onSizeChange:e[4]||(e[4]=t=>l.pageData.pageSize=t),"current-page":l.pageData.currentPage,"page-size":l.pageData.pageSize,"page-sizes":l.pageData.pageSizes,"pager-count":l.pageData.pagerCount,total:i.filterMajorList.length,layout:"total, prev, pager, next,sizes, jumper"},null,8,["current-page","page-size","page-sizes","pager-count","total"])],64)}const Y=S(A,[["render",R],["__scopeId","data-v-e0d15bbe"]]);export{Y as default};
