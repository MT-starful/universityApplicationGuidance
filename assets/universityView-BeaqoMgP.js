import{h as k,_ as x,c as o,f as _,b as i,w as s,F as y,r,o as c,j as h,a as L,p as S,d as N,e as V}from"./index-Bvo1a719.js";import{r as b}from"./arrayTool-CjGzjlEy.js";import{c as P}from"./paginationTool-D_tISRW2.js";async function I(){try{return(await k(()=>import("./undergraduate-DY5QOA-z.js"),[])).default}catch{return[]}}function A(t){const e=t.map(d=>d.mode);return b(e)}function E(t){let e=t.map(p=>p.province);e=b(e);const d=e.map(p=>{const n=t.filter(m=>m.province===p).map(m=>m.city);return{province:p,cityList:b(n)}});return{provinceList:e,allCityList:d}}const R={name:"libraryView",computed:{constant(){return o},cityList(){const t=this.allCityList.find(e=>e.province===this.province);return(t==null?void 0:t.cityList)??[]},filterUniversityList(){let t=this.universityList;return t=t.filter(e=>e.name.indexOf(this.schoolName)!==-1),this.province!==o.common.all&&(t=t.filter(e=>e.province===this.province)),this.city!==o.common.all&&(t=t.filter(e=>e.city===this.city)),this.mode!==o.common.all&&(t=t.filter(e=>e.mode===this.mode)),t},displayUniversityList(){return P(this.filterUniversityList,this.pageData)}},data(){return{schoolName:"",provinceList:[],province:o.common.all,allCityList:[],city:o.common.all,modeList:[],mode:o.common.all,universityList:[],pageData:{currentPage:1,pageSize:10,pageSizes:[10,20,50,100],pagerCount:5}}},methods:{goBack(){this.$router.push(`/${o.tabBar.DATA}/${o.dataNavBar.LIBRARY}/search`)},provinceChange(){this.city=o.common.all}},async mounted(){this.universityList=await I(),this.modeList=A(this.universityList);const t=E(this.universityList);this.provinceList=t.provinceList,this.allCityList=t.allCityList}},U=t=>(S("data-v-e7fe808b"),t=t(),N(),t),j=U(()=>V("span",null,"本科院校库",-1)),F=U(()=>V("span",null,"没有相关院校",-1));function M(t,e,d,p,a,n){const m=r("el-page-header"),C=r("el-divider"),w=r("el-input"),u=r("el-option"),g=r("el-select"),f=r("el-form-item"),z=r("el-form"),v=r("el-table-column"),B=r("el-table"),D=r("el-pagination");return c(),_(y,null,[i(m,{onBack:n.goBack},{content:s(()=>[j]),_:1},8,["onBack"]),i(C,{class:"head-divider"}),i(w,{modelValue:a.schoolName,"onUpdate:modelValue":e[0]||(e[0]=l=>a.schoolName=l),modelModifiers:{trim:!0},placeholder:"学校名称","prefix-icon":"Search",clearable:""},null,8,["modelValue"]),i(z,{class:"filter-form"},{default:s(()=>[i(f,{label:"省份："},{default:s(()=>[i(g,{modelValue:a.province,"onUpdate:modelValue":e[1]||(e[1]=l=>a.province=l),onChange:n.provinceChange},{default:s(()=>[i(u,{label:n.constant.common.all,value:n.constant.common.all},null,8,["label","value"]),(c(!0),_(y,null,h(a.provinceList,l=>(c(),L(u,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),i(f,{label:"城市："},{default:s(()=>[i(g,{modelValue:a.city,"onUpdate:modelValue":e[2]||(e[2]=l=>a.city=l),disabled:n.cityList.length===0},{default:s(()=>[i(u,{label:n.constant.common.all,value:n.constant.common.all},null,8,["label","value"]),(c(!0),_(y,null,h(n.cityList,l=>(c(),L(u,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),i(f,{label:"办学模式："},{default:s(()=>[i(g,{modelValue:a.mode,"onUpdate:modelValue":e[3]||(e[3]=l=>a.mode=l),"fit-input-width":!0},{default:s(()=>[i(u,{label:n.constant.common.all,value:n.constant.common.all},null,8,["label","value"]),(c(!0),_(y,null,h(a.modeList,l=>(c(),L(u,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(C,{class:"table-head-divider"}),i(B,{data:n.displayUniversityList,stripe:""},{empty:s(()=>[F]),default:s(()=>[i(v,{prop:"name",label:"院校名称"}),i(v,{prop:"province",label:"省份",width:"70px"}),i(v,{prop:"city",label:"城市",width:"70px"}),i(v,{prop:"mode",label:"办学模式",width:"60px"})]),_:1},8,["data"]),i(D,{class:"pagination",onCurrentChange:e[4]||(e[4]=l=>a.pageData.currentPage=l),onSizeChange:e[5]||(e[5]=l=>a.pageData.pageSize=l),"current-page":a.pageData.currentPage,"page-size":a.pageData.pageSize,"page-sizes":a.pageData.pageSizes,"pager-count":a.pageData.pagerCount,total:n.filterUniversityList.length,layout:"total, prev, pager, next,sizes, jumper"},null,8,["current-page","page-size","page-sizes","pager-count","total"])],64)}const q=x(R,[["render",M],["__scopeId","data-v-e7fe808b"]]);export{q as default};
